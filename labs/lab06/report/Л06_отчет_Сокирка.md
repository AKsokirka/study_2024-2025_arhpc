---
## Front matter
title: "Шаблон отчёта по лабораторной работе"
subtitle: "Простейший вариант"
author: "Сокирка Анна Константиновна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Цель данной лабораторной работы - освоение арифметических инструкций
языка ассемблера NASM.

# Задание

1. Символьные и численные данные в NASM
2. Выполнение арифметических операций в NASM
3. Выполнение заданий для самостоятельной работы


# Теоретическое введение
Большинство инструкций на языке ассемблера требуют обработки операндов.
Адрес операнда предоставляет место, где хранятся данные, подлежащие обработке. Это могут быть данные хранящиеся в регистре или в ячейке памяти. -
Регистровая адресация – операнды хранятся в регистрах и в команде используются имена этих регистров, например: mov ax,bx. - Непосредственная адресация
– значение операнда задается непосредственно в команде, Например: mov ax,2.
- Адресация памяти – операнд задает адрес в памяти. В команде указывается
символическое обозначение ячейки памяти, над содержимым которой требуется
выполнить операцию.
Ввод информации с клавиатуры и вывод её на экран осуществляется в символьном виде. Кодирование этой информации производится согласно кодовой таблице символов ASCII. ASCII – сокращение от American Standard Code for Information
Interchange (Американский стандартный код для обмена информацией). Согласно стандарту ASCII каждый символ кодируется одним байтом. Среди инструкций
NASM нет такой, которая выводит числа (не в символьном виде). Поэтому, например, чтобы вывести число, надо предварительно преобразовать его цифры в
ASCII-коды этих цифр и выводить на экран эти коды, а не само число. Если же
выводить число на экран непосредственно, то экран воспримет его не как число,
а как последовательность ASCII-символов – каждый байт числа будет воспринят
как один ASCII-символ – и выведет на экран эти символы. Аналогичная ситуация происходит и при вводе данных с клавиатуры. Введенные данные будут
представлять собой символы, что сделает невозможным получение корректного
результата при выполнении над ними арифметических операций. Для решения
этой проблемы необходимо проводить преобразование ASCII символов в числа
и обратно.

# Выполнение лабораторной работы

# 4.1 Символьные и численные данные в NASM

Создам каталог для программам лабораторной работы № 6, перейду в него и
создам файл lab6-1.asm (рис. [-@fig:001]).

![Создание каталога](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314784603464131871.jpg){#fig:001 width=70%}

Введу в файл lab6-1.asm текст программы из листинга 6.1 (рис. [-@fig:002]).

![Ввод текста из листинга](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314784603464131872.jpg){#fig:002 width=70%}

Копирую файл in_out.asm в файл lab06 (рис. [-@fig:003]).

![Копирование файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314784603464131873.jpg){#fig:003 width=70%}

Создам исполняемый файл и запущу его (рис. [-@fig:004]).

![Запуск исполняемого файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314784603464131875.jpg){#fig:004 width=70%}

Далее изменю текст программы и вместо символов, запишу в регистры числа. Исправлю текст программы (Листинг 6.1) (рис. [-@fig:005]).

![Изменение текста программы](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314784603464131876.jpg){#fig:005 width=70%}

Создам исполняемый файл и запущу его.Теперь вывелся символ с кодом 10, это символ перевода строки, этот символ не отображается при выводе на экран (рис. [-@fig:006]).

![Создание файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314784603464131877.jpg){#fig:006 width=70%}

Создам файл lab6-2.asm в каталоге ~/work/arch-pc/lab06 и введу в него текст программы из листинга 6.2. (рис. [-@fig:007]).

![Создание файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212317.jpg){#fig:007 width=70%}

Создам исполняемый файл и запущу его.В результате работы программы мы получим число 106. В данном случае, как и в первом,
команда add складывает коды символов ‘6’ и ‘4’ (54+52=106). Однако, в отличии от программы
из листинга 6.1, функция iprintLF позволяет вывести число, а не символ, кодом которого
является это число (рис. [-@fig:008]).

![Создание исполняемого файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212318.jpg){#fig:008 width=70%}

Аналогично предыдущему примеру изменю символы на числа (рис. [-@fig:009]).

![Изменение текста программы](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212319.jpg){#fig:009 width=70%}

Создам исполняемый файл и запущу его. Теперь программа
складывает не соответствующие символам коды в системе ASCII, а сами числа,
поэтому вывод 10 (рис. [-@fig:010]).

![Создание файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212320.jpg){#fig:010 width=70%}

Заменю функцию iprintLF на iprint. Создам исполняемый файл и запущу его. Вывод изменился. Функция iprint не добавляет к выводу символ переноса строки,
в отличие от iprintLF.
(рис. [-@fig:011]).

![Изменение текста программы](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212321.jpg){#fig:011 width=70%}

# 4.2 Выполнение арифметических операций в NASM

Создам файл lab6-3.asm в каталоге ~/work/arch-pc/lab06. Внимательно изучаю текст программы из листинга 6.3 и ввожу в lab6-3.asm (рис. [-@fig:012]).

![Создание файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212322.jpg){#fig:012 width=70%}

Создам исполняемый файл и запущу его (рис. [-@fig:013]).

![Создание и запуск файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212323.jpg){#fig:013 width=70%}

Изменю текст программы для вычисления выражения 𝑓(𝑥) = (4 * 6 + 2)/5. Создам
исполняемый файл и проверю его работу (рис. [-@fig:014]).
 
![Проверка исполняемого файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212324.jpg){#fig:014 width=70%}

Внимательно изучаю текст программы из листинга 6.4 и ввожу в файл variant.asm. Создам исполняемый файл и запущу его (рис. [-@fig:016]).

![Запуск программы](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212325.jpg){#fig:016 width=70%}

# 4.2.1 Ответы на вопросы по программе

1. За вывод сообщения “Ваш вариант” отвечают строки кода:
mov eax,rem
call sprint

2. Инструкция mov ecx, x используется, чтобы положить адрес вводимой строки x в регистр ecx. mov edx, 80 - запись в регистр edx длины вводимой строки
call sread - вызов подпрограммы из внешнего файла, обеспечивающей ввод
сообщения с клавиатуры

3. call atoi используется для вызова подпрограммы из внешнего файла, которая преобразует ascii-код символа в целое число и записывает результат в
регистр eax

4. За вычисления варианта отвечают строки:
xor edx,edx ; обнуление edx для корректной работы div
mov ebx,20 ; ebx = 20
div ebx ; eax = eax/20, edx - остаток от деления
inc edx ; edx = edx + 1

5. При выполнении инструкции div ebx остаток от деления записывается в
регистр edx

6. Инструкция inc edx увеличивает значение регистра edx на 1

7. За вывод на экран результатов вычислений отвечают строки:
mov eax,edx
call iprintLF

# 4.3 Выполнение заданий для самостоятельной работы

Создаю файл lab7-4.asm (рис. [-@fig:018]).

![Создание файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212326.jpg){#fig:018 width=70%}

Открываю созданный файл для редактирования, ввожу в него текст программы
для вычисления значения выражения (1/3*𝑥 + 5)*7. Это выражение
было под вариантом 19 (рис. [-@fig:019]).

![Ввод текста программы](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212329.jpg){#fig:019 width=70%}

Создаю и запускаю исполняемый файл (рис. [-@fig:020]).

![Запуск исполняемого файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212330.jpg){#fig:020 width=70%}

Провожу еще один запуск исполняемого файла для проверки работы программы с другим значением на входе (рис. [-@fig:021]).

![Проверка работы исполняемого файла](/home/aksokirka/work/study/2024-2025/Архитектура компьютера/arch-pc/labs/lab06/presentation/image/5314646567510212331.jpg){#fig:021 width=70%}

# Выводы

При выполнении данной лабораторной работы я освоила арифметические
инструкции языка ассемблера NASM.

# Список литературы

https://esystem.rudn.ru/pluginfile.php/2089086/mod_resource/content/0/Лабораторная%20работа%20№6.%20Арифметические%20операции%20в%20NASM..pdf
